#!/bin/sh


help(){
    cat<<__EOF__
    usage: m bluetooth [ status | enable | disable | help ]

    Examples:
      m bluetooth status    # bluetooth status
      m bluetooth enable    # turn on bluetooth
      m bluetooth disable   # turn off bluetooth
__EOF__
}

has_bluetooth()
{
	dmesg | grep -i blue > /dev/null 2>&1
}

case $1 in
    help)
        help
        ;;
    status)
        defaults read /Library/Preferences/com.apple.Bluetooth ControllerPowerState | \
            awk '{
					if($1 != 0)
					{
						print "Bluetooth: ON"
					}
					else
					{
						print "Bluetooth: OFF"
					}
				}'
        ;;
    enable)
        sudo defaults write /Library/Preferences/com.apple.Bluetooth ControllerPowerState -int 1
        ;;
    disable)
        sudo defaults write /Library/Preferences/com.apple.Bluetooth ControllerPowerState -int 0 && \
            sudo killall -HUP blued
        ;;
    *)
        help
        ;;
esac

# vim: set ts=4 sw=4 softtabstop=4 expandtab
